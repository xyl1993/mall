(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{613:function(t,e,a){"use strict";a.r(e);var n=a(921),i=a(677);for(var r in i)"default"!==r&&function(t){a.d(e,t,function(){return i[t]})}(r);a(803);var s=a(140),o=Object(s.a)(i.default,n.a,n.b,!1,null,"70e28c9a",null);o.options.__file="src/app/views/shopManage/brand/brand.vue",e.default=o.exports},622:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.timeoutText=e.timeFormat=e.dateFormat=e.pageSize=void 0;e.pageSize=10;e.dateFormat="YYYY-MM-DD";e.timeFormat="YYYY-MM-DD HH:mm:ss";e.timeoutText="登录过期，请重新登录"},625:function(t,e,a){"use strict";var n=a(91);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(a(632)),r=n(a(633)),s=n(a(634)),o=a(318),l=new RegExp(o.apiConfig.allowUrls),d=new RegExp(o.apiConfig.noJsonTypeUrls);function u(t){if(!l.test(t)){var e=localStorage.getItem("malltoken");return d.test(t)?{token:e}:{token:e,"Content-Type":"application/json;charset=UTF-8"}}return d.test(t)?{}:{"Content-Type":"application/json;charset=UTF-8"}}function c(t){return s.default.done(),{data:{status:t.status,data:t.data}}}i.default.interceptors.request.use(function(t){return s.default.start(),t},function(t){return Promise.reject(t)}),i.default.interceptors.response.use(function(t){return t},function(t){return Promise.resolve(t.response)});var f={post:function(t,e){return(0,i.default)({method:"post",url:o.apiConfig.base_api_host+t,data:JSON.stringify(e),timeout:3e4,headers:u(t)}).then(c).catch(function(t){return t})},get:function(t,e){return(0,i.default)({method:"get",url:o.apiConfig.base_api_host+t,params:e,timeout:3e4,headers:u(t)}).then(c).catch(function(t){return console.log(t),t})},delete:function(t,e){return(0,i.default)({method:"delete",url:o.apiConfig.base_api_host+t,params:e,timeout:3e4,headers:u(t)}).then(c).catch(function(t){return console.log(t),t})},put:function(t,e){return(0,i.default)({method:"put",url:o.apiConfig.base_api_host+t,data:JSON.stringify(e),timeout:3e4,headers:u(t)}).then(c).catch(function(t){return console.log(t),t})},formPost:function(t,e){return(0,i.default)({method:"post",url:o.apiConfig.base_api_host+t,data:r.default.stringify(e),timeout:3e4,headers:u(t)}).then(c)}};e.default=f},626:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.statusValid=void 0;var n=a(622),i=a(635);e.statusValid=function(t,e,a){return t.actionStatus&&(t.actionStatus=!1),!(e!==i.OK&&(e===i.NOT_FOUND?(t.$message({message:"请求不存在",type:"error"}),1):e===i.UNAUTHORIZED?(t.$message({message:a,type:"error"}),1):e===i.FORBIDDEN?(t.$message({message:n.timeoutText,type:"warning",duration:2e3,onClose:function(){localStorage.removeItem("malluser"),localStorage.removeItem("malltoken"),localStorage.removeItem("mallfilePath"),t.$router.replace({path:"/login"})}}),1):(t.$message({message:"服务器出错",type:"error"}),1)))}},627:function(t,e){t.exports=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,a):{};n.get||n.set?Object.defineProperty(e,a,n):e[a]=t[a]}return e.default=t,e}},640:function(t,e,a){"use strict";var n=a(91);Object.defineProperty(e,"__esModule",{value:!0}),e.deleteSpecifications=e.updateRecommend=e.editProductDetail=e.getProductDetail=e.deleteProduct=e.addProduct=e.getProductList=void 0;var i=n(a(625));e.getProductList=function(t){return i.default.get("product",t).then(function(t){return t.data})};e.addProduct=function(t){return i.default.post("admin/product",t).then(function(t){return t.data})};e.deleteProduct=function(t){return i.default.delete("admin/product/".concat(t)).then(function(t){return t.data})};e.getProductDetail=function(t){return i.default.get("product/".concat(t)).then(function(t){return t.data})};e.editProductDetail=function(t,e){return i.default.put("admin/product/".concat(t),e).then(function(t){return t.data})};e.updateRecommend=function(t,e){return i.default.put("admin/product/".concat(t,"/updateRecommend"),e).then(function(t){return t.data})};e.deleteSpecifications=function(t){return i.default.delete("admin/specifications/".concat(t)).then(function(t){return t.data})}},674:function(t,e,a){"use strict";var n=a(91);Object.defineProperty(e,"__esModule",{value:!0}),e.updateType=e.deleteType=e.addType=e.getTypeList=e.updateBrand=e.deleteBrand=e.addBrand=e.getBrandList=void 0;var i=n(a(625));e.getBrandList=function(t){return i.default.get("brand",t).then(function(t){return t.data})};e.addBrand=function(t){return i.default.post("admin/brand",t).then(function(t){return t.data})};e.deleteBrand=function(t){return i.default.delete("admin/brand/".concat(t)).then(function(t){return t.data})};e.updateBrand=function(t,e){return i.default.put("admin/brand/".concat(t),e).then(function(t){return t.data})};e.getTypeList=function(t){return i.default.get("goods-type",t).then(function(t){return t.data})};e.addType=function(t){return i.default.post("admin/goods-type",t).then(function(t){return t.data})};e.deleteType=function(t){return i.default.delete("admin/goods-type/".concat(t)).then(function(t){return t.data})};e.updateType=function(t,e){return i.default.put("admin/goods-type/".concat(t),e).then(function(t){return t.data})}},677:function(t,e,a){"use strict";a.r(e);var n=a(678),i=a.n(n);for(var r in n)"default"!==r&&function(t){a.d(e,t,function(){return n[t]})}(r);e.default=i.a},678:function(t,e,a){"use strict";var n=a(627);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i,r=n(a(674)),s=a(640),o=a(626),l=a(318),d=(a(622),a(1),{data:function(){return{filePath:"",imgUrl:"",imgTypeUrl:"",brandList:[],typeList:[],shopList:[],productList:[],brandStatus:!1,typeStatus:!1,brandModel:{},typeModel:{brand_id:""},selBrandId:"",selTypeId:"",headers:{},dialogVisible:!1,dialogImageUrl:"",sealImgAction:"".concat(l.apiConfig.base_api_host,"admin/uploadDisk"),brandRules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}]},typeRules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}],brand_id:[{required:!0,message:"请选择品牌",trigger:"blur"}]}}},computed:{},components:{},mounted:function(){i=this.$loading({target:".content-container",lock:!0,background:"rgba(255, 255, 255, 0.74)"}),this.filePath=localStorage.getItem("mallfilePath");var t=localStorage.getItem("malltoken");this.headers={token:t},this.getBrandList(),this.getTypeList(),this.getProductList()},filters:{},methods:{getBrandList:function(){var t=this;r.getBrandList().then(function(e){var a=e.data,n=e.status;(0,o.statusValid)(t,n,a)&&(t.brandList=a)})},deleteBrand:function(t,e,a){var n=this;this.$confirm("将同时删除对应的商品，确认删除吗?","提示",{}).then(function(){r.deleteBrand(e.id).then(function(e){var i=e.data,r=e.status;(0,o.statusValid)(n,r,i)&&a.splice(t,1)})}).catch(function(){})},deleteType:function(t,e,a){var n=this;this.$confirm("将同时删除对应的商品，确认删除吗?","提示",{}).then(function(){r.deleteType(e.id).then(function(e){var i=e.data,r=e.status;(0,o.statusValid)(n,r,i)&&a.splice(t,1)})})},getTypeList:function(){var t=this,e={brand_id:this.selBrandId};r.getTypeList(e).then(function(e){var a=e.data,n=e.status;(0,o.statusValid)(t,n,a)&&(t.typeList=a)})},getProductList:function(){var t=this,e={brand_id:this.selBrandId,type_id:this.selTypeId};(0,s.getProductList)(e).then(function(e){var a=e.data,n=e.status;(0,o.statusValid)(t,n,a)&&(i.close(),t.productList=a.data)})},addBrand:function(){this.brandStatus=!0,this.imgUrl="",this.brandModel={}},editBrand:function(t,e){this.brandModel=e,this.imgUrl=e.cover?this.filePath+e.cover:"",this.brandStatus=!0},addType:function(){this.typeModel={brand_id:this.selBrandId},this.imgTypeUrl="",this.typeStatus=!0},editType:function(t,e){this.imgTypeUrl=e.cover?this.filePath+e.cover:"",this.typeModel=e,this.typeStatus=!0},cancelBrand:function(){this.brandStatus=!1},sureBrand:function(){var t=this;this.$refs.brandForm.validate(function(e){if(e){var a=t.brandModel;a.id?r.updateBrand(a.id,a).then(function(e){var a=e.data,n=e.status;(0,o.statusValid)(t,n,a)}):r.addBrand(a).then(function(e){var a=e.data,n=e.status;(0,o.statusValid)(t,n,a)&&t.getBrandList()}),t.brandStatus=!1}})},cancelType:function(){this.typeStatus=!1},sureType:function(){var t=this;this.$refs.typeForm.validate(function(e){if(e){var a=t.typeModel;a.id?r.updateType(a.id,a).then(function(e){var a=e.data,n=e.status;(0,o.statusValid)(t,n,a)}):r.addType(a).then(function(e){var a=e.data,n=e.status;(0,o.statusValid)(t,n,a)&&t.getTypeList()}),t.typeStatus=!1}})},brandChange:function(t){t?(this.selBrandId=t.id,this.$refs.brandTable.setCurrentRow()):this.selBrandId="",this.getTypeList()},typeChange:function(t){this.selTypeId=t?t.id:"",this.getProductList()},formClose:function(){this.$refs.typeForm&&this.$refs.typeForm.clearValidate(),this.$refs.brandForm&&this.$refs.brandForm.clearValidate()},editProduct:function(t){t?this.$router.push({path:"/shopDetail",query:{scree:t}}):this.$router.push({path:"/shopDetail"})},handleAvatarSuccess:function(t,e){this.imgUrl=URL.createObjectURL(e.raw),this.brandModel.cover=t},handleTypeSuccess:function(t,e){this.imgTypeUrl=URL.createObjectURL(e.raw),this.typeModel.cover=t}}});e.default=d},679:function(t,e,a){},803:function(t,e,a){"use strict";var n=a(679);a.n(n).a},921:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"brand-cointer"},[a("div",{staticClass:"cointer-box"},[a("div",{staticClass:"brand-content"},[a("div",{staticClass:"header"},[a("div",[t._v("品牌")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(e){e.preventDefault(),t.addBrand()}}},[t._v("\n          新增\n        ")])],1),t._v(" "),a("div",{staticClass:"brand-table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.brandList,height:"250","highlight-current-row":""},on:{"current-change":t.brandChange}},[a("el-table-column",{attrs:{prop:"name",align:"center",label:"名称",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){a.preventDefault(),t.editBrand(e.$index,e.row)}}},[t._v("\n                编辑\n              ")]),t._v(" "),a("el-button",{staticClass:"danger",attrs:{type:"text",size:"small"},nativeOn:{click:function(a){a.preventDefault(),t.deleteBrand(e.$index,e.row,t.brandList)}}},[t._v("\n                删除\n              ")])]}}])})],1)],1)]),t._v(" "),a("div",{staticClass:"type-content"},[a("div",{staticClass:"header"},[a("div",[t._v("类型")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(e){e.preventDefault(),t.addType()}}},[t._v("\n          新增\n        ")])],1),t._v(" "),a("div",{staticClass:"brand-table"},[a("el-table",{ref:"brandTable",staticStyle:{width:"100%"},attrs:{data:t.typeList,height:"250","highlight-current-row":""},on:{"current-change":t.typeChange}},[a("el-table-column",{attrs:{prop:"name",label:"名称",width:"150",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){a.preventDefault(),t.editType(e.$index,e.row)}}},[t._v("\n                编辑\n              ")]),t._v(" "),a("el-button",{staticClass:"danger",attrs:{type:"text",size:"small"},nativeOn:{click:function(a){a.preventDefault(),t.deleteType(e.$index,e.row,t.typeList)}}},[t._v("\n                删除\n              ")])]}}])})],1)],1)]),t._v(" "),a("div",{staticClass:"goods-content"},[a("div",{staticClass:"header"},[a("div",[t._v("商品")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(e){e.preventDefault(),t.editProduct()}}},[t._v("\n          新增\n        ")])],1),t._v(" "),a("div",{staticClass:"goods-content"},[a("ul",{staticClass:"goods-ul clear"},t._l(t.productList,function(e,n){return a("li",{key:n},[a("div",{staticClass:"card"},[a("el-card",{attrs:{"body-style":{padding:"0px"}}},[a("div",{staticClass:"img-base",style:{"background-image":"url("+(t.filePath+e.cover)+")"}},[1===e.recommend?a("i",{staticClass:"el-icon-star-on"}):t._e()]),t._v(" "),a("div",{staticClass:"card-bottom"},[a("span",[t._v(t._s(e.title))]),t._v(" "),a("div",{staticClass:"bottom clear"},[a("time",{staticClass:"time"},[t._v(t._s(t._f("dateFilter")(e.create_time)))]),t._v(" "),a("el-button",{staticClass:"button",attrs:{type:"text"},nativeOn:{click:function(a){a.preventDefault(),t.editProduct(e.id)}}},[t._v("修改")])],1)])])],1)])}))])])]),t._v(" "),a("el-dialog",{attrs:{title:"品牌编辑",width:"60%",visible:t.brandStatus},on:{"update:visible":function(e){t.brandStatus=e},close:t.formClose}},[a("el-form",{ref:"brandForm",staticClass:"dialog-form",attrs:{model:t.brandModel,rules:t.brandRules}},[a("el-form-item",{attrs:{label:"名称","label-width":"120px",prop:"name"}},[a("el-input",{staticStyle:{width:"70%","max-width":"400px"},model:{value:t.brandModel.name,callback:function(e){t.$set(t.brandModel,"name",e)},expression:"brandModel.name"}})],1),t._v(" "),a("div",{staticClass:"formModel el-form-item clear",staticStyle:{position:"relative","padding-left":"120px"}},[a("label",{staticClass:"el-form-item__label",staticStyle:{width:"120px",position:"absolute",left:"0"}},[t._v("缩略图")]),t._v(" "),a("div",{},[a("el-upload",{staticClass:"avatar-uploader",attrs:{headers:t.headers,"show-file-list":!1,accept:"image/*",action:t.sealImgAction,"on-success":t.handleAvatarSuccess}},[t.imgUrl?a("img",{staticClass:"avatar",attrs:{src:t.imgUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)])],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.cancelBrand()}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.sureBrand()}}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"类型编辑",width:"60%",visible:t.typeStatus},on:{"update:visible":function(e){t.typeStatus=e},close:t.formClose}},[a("el-form",{ref:"typeForm",staticClass:"dialog-form",attrs:{model:t.typeModel,rules:t.typeRules}},[a("el-form-item",{attrs:{label:"品牌","label-width":"120px",prop:"name"}},[a("el-select",{staticStyle:{width:"70%","max-width":"400px"},attrs:{filterable:"",placeholder:"请选择"},model:{value:t.typeModel.brand_id,callback:function(e){t.$set(t.typeModel,"brand_id",e)},expression:"typeModel.brand_id"}},t._l(t.brandList,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"名称","label-width":"120px",prop:"name"}},[a("el-input",{staticStyle:{width:"70%","max-width":"400px"},model:{value:t.typeModel.name,callback:function(e){t.$set(t.typeModel,"name",e)},expression:"typeModel.name"}})],1),t._v(" "),a("div",{staticClass:"formModel el-form-item clear",staticStyle:{position:"relative","padding-left":"120px"}},[a("label",{staticClass:"el-form-item__label",staticStyle:{width:"120px",position:"absolute",left:"0"}},[t._v("缩略图")]),t._v(" "),a("div",{},[a("el-upload",{staticClass:"avatar-uploader",attrs:{headers:t.headers,"show-file-list":!1,accept:"image/*",action:t.sealImgAction,"on-success":t.handleTypeSuccess}},[t.imgTypeUrl?a("img",{staticClass:"avatar",attrs:{src:t.imgTypeUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)])],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.cancelType()}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.sureType()}}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)},i=[];n._withStripped=!0,a.d(e,"a",function(){return n}),a.d(e,"b",function(){return i})}}]);