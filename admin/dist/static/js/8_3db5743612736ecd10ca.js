(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{612:function(t,e,i){"use strict";i.r(e);var a=i(920),r=i(672);for(var n in r)"default"!==n&&function(t){i.d(e,t,function(){return r[t]})}(n);i(801),i(802);var s=i(140),o=Object(s.a)(r.default,a.a,a.b,!1,null,"69923058",null);o.options.__file="src/app/views/shopManage/shop/shopDetail.vue",e.default=o.exports},622:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.timeoutText=e.timeFormat=e.dateFormat=e.pageSize=void 0;e.pageSize=10;e.dateFormat="YYYY-MM-DD";e.timeFormat="YYYY-MM-DD HH:mm:ss";e.timeoutText="登录过期，请重新登录"},625:function(t,e,i){"use strict";var a=i(91);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=a(i(632)),n=a(i(633)),s=a(i(634)),o=i(318),l=new RegExp(o.apiConfig.allowUrls),c=new RegExp(o.apiConfig.noJsonTypeUrls);function u(t){if(!l.test(t)){var e=localStorage.getItem("malltoken");return c.test(t)?{token:e}:{token:e,"Content-Type":"application/json;charset=UTF-8"}}return c.test(t)?{}:{"Content-Type":"application/json;charset=UTF-8"}}function d(t){return s.default.done(),{data:{status:t.status,data:t.data}}}r.default.interceptors.request.use(function(t){return s.default.start(),t},function(t){return Promise.reject(t)}),r.default.interceptors.response.use(function(t){return t},function(t){return Promise.resolve(t.response)});var p={post:function(t,e){return(0,r.default)({method:"post",url:o.apiConfig.base_api_host+t,data:JSON.stringify(e),timeout:3e4,headers:u(t)}).then(d).catch(function(t){return t})},get:function(t,e){return(0,r.default)({method:"get",url:o.apiConfig.base_api_host+t,params:e,timeout:3e4,headers:u(t)}).then(d).catch(function(t){return console.log(t),t})},delete:function(t,e){return(0,r.default)({method:"delete",url:o.apiConfig.base_api_host+t,params:e,timeout:3e4,headers:u(t)}).then(d).catch(function(t){return console.log(t),t})},put:function(t,e){return(0,r.default)({method:"put",url:o.apiConfig.base_api_host+t,data:JSON.stringify(e),timeout:3e4,headers:u(t)}).then(d).catch(function(t){return console.log(t),t})},formPost:function(t,e){return(0,r.default)({method:"post",url:o.apiConfig.base_api_host+t,data:n.default.stringify(e),timeout:3e4,headers:u(t)}).then(d)}};e.default=p},626:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.statusValid=void 0;var a=i(622),r=i(635);e.statusValid=function(t,e,i){return t.actionStatus&&(t.actionStatus=!1),!(e!==r.OK&&(e===r.NOT_FOUND?(t.$message({message:"请求不存在",type:"error"}),1):e===r.UNAUTHORIZED?(t.$message({message:i,type:"error"}),1):e===r.FORBIDDEN?(t.$message({message:a.timeoutText,type:"warning",duration:2e3,onClose:function(){localStorage.removeItem("malluser"),localStorage.removeItem("malltoken"),localStorage.removeItem("mallfilePath"),t.$router.replace({path:"/login"})}}),1):(t.$message({message:"服务器出错",type:"error"}),1)))}},640:function(t,e,i){"use strict";var a=i(91);Object.defineProperty(e,"__esModule",{value:!0}),e.deleteSpecifications=e.updateRecommend=e.editProductDetail=e.getProductDetail=e.deleteProduct=e.addProduct=e.getProductList=void 0;var r=a(i(625));e.getProductList=function(t){return r.default.get("product",t).then(function(t){return t.data})};e.addProduct=function(t){return r.default.post("admin/product",t).then(function(t){return t.data})};e.deleteProduct=function(t){return r.default.delete("admin/product/".concat(t)).then(function(t){return t.data})};e.getProductDetail=function(t){return r.default.get("product/".concat(t)).then(function(t){return t.data})};e.editProductDetail=function(t,e){return r.default.put("admin/product/".concat(t),e).then(function(t){return t.data})};e.updateRecommend=function(t,e){return r.default.put("admin/product/".concat(t,"/updateRecommend"),e).then(function(t){return t.data})};e.deleteSpecifications=function(t){return r.default.delete("admin/specifications/".concat(t)).then(function(t){return t.data})}},672:function(t,e,i){"use strict";i.r(e);var a=i(673),r=i.n(a);for(var n in a)"default"!==n&&function(t){i.d(e,t,function(){return a[t]})}(n);e.default=r.a},673:function(t,e,i){"use strict";var a=i(627);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=a(i(640)),n=i(674),s=i(626),o=i(318);i(321),i(792),i(793);var l=i(794);i(798);var c,u=i(799),d={data:function(){return{form:{brand_id:"",type_id:"",cover:"",specifications:[{name:"均码",original_price:"",current_price:"",stock:""}]},sealImgAction:"".concat(o.apiConfig.base_api_host,"admin/uploadDisk"),fileList:[],imgUrl:"",typeList:[],brandList:[],chooseTypeList:[],filePath:"",actionStatus:!1,headers:{},dialogVisible:!1,imgArray:[],uillUpdateImg:!1,dialogImageUrl:"",productId:"",editorOption:{modules:{toolbar:{container:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{font:[]}],[{color:[]},{background:[]}],[{align:[]}],["clean"],["link","image","video"]],handlers:{image:function(t){t?document.querySelector(".quill-uploader input").click():this.quill.format("image",!1)}}},syntax:{highlight:function(t){return hljs.highlightAuto(t).value}}}},swiperOption:{autoplay:!0,pagination:{el:".swiper-pagination"}},phoneSwiperOption:{direction:"vertical",slidesPerView:"auto",freeMode:!0,scrollbar:{el:".swiper-scrollbar"},mousewheel:!0},rules:{title:[{required:!0,message:"请输入标题",trigger:"blur"}],brand_id:[{required:!0,message:"请输入品牌",trigger:"blur"}],type_id:[{required:!0,message:"请输入分类",trigger:"blur"}]}}},computed:{},components:{quillEditor:l.quillEditor,swiper:u.swiper,swiperSlide:u.swiperSlide},mounted:function(){this.filePath=localStorage.getItem("mallfilePath");var t=localStorage.getItem("malltoken");this.productId=this.$route.query.scree,this.productId&&(c=this.$loading({target:".content-container",lock:!0,background:"rgba(255, 255, 255, 0.74)"})),this.headers={token:t};this.getBrandList()},methods:{getBrandList:function(){var t=this;(0,n.getBrandList)().then(function(e){var i=e.data,a=e.status;(0,s.statusValid)(t,a,i)&&(t.brandList=i,t.getTypeList())})},getTypeList:function(){var t=this;(0,n.getTypeList)().then(function(e){var i=e.data,a=e.status;(0,s.statusValid)(t,a,i)&&(t.typeList=i,t.chooseTypeList=Object.assign({},i),t.productId&&t.getProductDetail())})},getProductDetail:function(){var t=this;r.getProductDetail(this.productId).then(function(e){var i=e.data,a=e.status;(0,s.statusValid)(t,a,i)&&(t.form=i,t.imgUrl=i.cover?t.filePath+i.cover:"",i.carousel&&i.carousel.split(",").map(function(e,i){t.fileList.push({url:t.filePath+e}),t.imgArray.push(e)}),c.close())})},onExceed:function(t){this.$notify({title:"提示",message:"每项最多上传6张图片",type:"warning"})},handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},onSignImgRemove:function(t,e){this.imgArray=[];var i=!0,a=!1,r=void 0;try{for(var n,s=e[Symbol.iterator]();!(i=(n=s.next()).done);i=!0){var o=n.value;this.imgArray.push(o.response.data)}}catch(t){a=!0,r=t}finally{try{i||null==s.return||s.return()}finally{if(a)throw r}}},signUploadSuccess:function(t,e){this.imgArray.push(t)},handleAvatarSuccess:function(t,e){this.imgUrl=URL.createObjectURL(e.raw),this.form.cover=t},onSubmit:function(){var t=this,e=this;this.$refs.form.validate(function(i){if(!i)return!1;t.actionStatus=!0;var a=Object.assign({},t.form);a.carousel=t.imgArray.join(),t.productId?r.editProductDetail(t.productId,a).then(function(i){var a=i.data,r=i.status;(0,s.statusValid)(t,r,a)&&t.$message({message:"保存成功",duration:1e3,type:"success",onClose:function(){e.actionStatus=!1,e.$router.push({path:"/shopList"})}})}):r.addProduct(a).then(function(i){var a=i.data,r=i.status;(0,s.statusValid)(t,r,a)&&t.$message({message:"保存成功",type:"success",onClose:function(){e.actionStatus=!1,e.$router.push({path:"/shopList"})}})})})},cancel:function(){this.$router.push({path:"/shopList"})},selBrand:function(){var t=this;this.form.type_id="",this.chooseTypeList=this.typeList.filter(function(e,i){return e.brand_id===t.form.brand_id})},addRow:function(){this.form.specifications.push({name:"",original_price:"",current_price:"",stock:""})},deleteRow:function(t,e,i){var a=this;this.productId&&i.id&&r.deleteSpecifications(i.id).then(function(t){var e=t.data,i=t.status;(0,s.statusValid)(a,i,e)}),e.splice(t,1)},quillUloadSuccess:function(t,e){var i=this.$refs.myQuillEditor.quill,a=i.getSelection().index;i.insertEmbed(a,"image",this.filePath+t),i.setSelection(a+1),this.quillUpdateImg=!1},quilUploadError:function(){this.quillUpdateImg=!1,this.$message.error("图片插入失败")},quillBeforeUpload:function(){this.quillUpdateImg=!0}}};e.default=d},674:function(t,e,i){"use strict";var a=i(91);Object.defineProperty(e,"__esModule",{value:!0}),e.updateType=e.deleteType=e.addType=e.getTypeList=e.updateBrand=e.deleteBrand=e.addBrand=e.getBrandList=void 0;var r=a(i(625));e.getBrandList=function(t){return r.default.get("brand",t).then(function(t){return t.data})};e.addBrand=function(t){return r.default.post("admin/brand",t).then(function(t){return t.data})};e.deleteBrand=function(t){return r.default.delete("admin/brand/".concat(t)).then(function(t){return t.data})};e.updateBrand=function(t,e){return r.default.put("admin/brand/".concat(t),e).then(function(t){return t.data})};e.getTypeList=function(t){return r.default.get("goods-type",t).then(function(t){return t.data})};e.addType=function(t){return r.default.post("admin/goods-type",t).then(function(t){return t.data})};e.deleteType=function(t){return r.default.delete("admin/goods-type/".concat(t)).then(function(t){return t.data})};e.updateType=function(t,e){return r.default.put("admin/goods-type/".concat(t),e).then(function(t){return t.data})}},675:function(t,e,i){},676:function(t,e,i){},801:function(t,e,i){"use strict";var a=i(675);i.n(a).a},802:function(t,e,i){"use strict";var a=i(676);i.n(a).a},920:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"cointer-box"},[i("el-row",{staticClass:"row"},[i("el-col",{attrs:{span:16}},[i("el-form",{ref:"form",staticClass:"detail-form",attrs:{model:t.form,"label-width":"80px","status-icon":"",rules:t.rules}},[i("el-form-item",{attrs:{label:"商品标题",prop:"title"}},[i("el-input",{staticStyle:{"max-width":"480px"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"品牌",prop:"brand_id"}},[i("el-select",{staticStyle:{width:"180px"},attrs:{filterable:"",placeholder:"请选择"},on:{change:function(e){t.selBrand()}},model:{value:t.form.brand_id,callback:function(e){t.$set(t.form,"brand_id",e)},expression:"form.brand_id"}},t._l(t.brandList,function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),i("el-form-item",{attrs:{label:"分类",prop:"type_id"}},[i("el-select",{staticStyle:{width:"180px"},attrs:{filterable:"",placeholder:"请选择"},model:{value:t.form.type_id,callback:function(e){t.$set(t.form,"type_id",e)},expression:"form.type_id"}},t._l(t.chooseTypeList,function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),i("div",{staticClass:"specification-content el-form--inline "},[i("div",{staticClass:"sp-div"},[t._v("规格")]),t._v(" "),t._l(t.form.specifications,function(e,a){return i("div",{key:a},[i("el-form-item",{attrs:{label:"规格",prop:"specifications."+a+".name",rules:{required:!0,message:"规格不能为空",trigger:"blur"}}},[i("el-input",{staticStyle:{width:"180px"},attrs:{type:"text"},model:{value:e.name,callback:function(i){t.$set(e,"name",i)},expression:"item.name"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"原价",prop:"specifications."+a+".original_price",rules:{required:!0,message:"原价不能为空",trigger:"blur"}}},[i("el-input",{staticStyle:{width:"180px"},attrs:{type:"number"},model:{value:e.original_price,callback:function(i){t.$set(e,"original_price",i)},expression:"item.original_price"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"现价",prop:"specifications."+a+".current_price",rules:{required:!1,message:"现价不能为空",trigger:"blur"}}},[i("el-input",{staticStyle:{width:"180px"},attrs:{type:"number"},model:{value:e.current_price,callback:function(i){t.$set(e,"current_price",i)},expression:"item.current_price"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"库存",prop:"specifications."+a+".stock",rules:{required:!0,message:"库存不能为空",trigger:"blur"}}},[i("el-input",{staticStyle:{width:"180px"},attrs:{type:"number"},model:{value:e.stock,callback:function(i){t.$set(e,"stock",i)},expression:"item.stock"}})],1),t._v(" "),i("el-form-item",{attrs:{label:" "}},[i("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(e){e.preventDefault(),t.addRow()}}},[t._v("\n                增行\n              ")]),t._v(" "),0!==a?i("el-button",{staticClass:"danger",attrs:{type:"text",size:"small"},nativeOn:{click:function(i){i.preventDefault(),t.deleteRow(a,t.form.specifications,e)}}},[t._v("\n                删行\n              ")]):t._e()],1)],1)})],2),t._v(" "),i("div",{staticClass:"formModel el-form-item clear",staticStyle:{position:"relative","padding-left":"80px"}},[i("label",{staticClass:"el-form-item__label",staticStyle:{width:"80px",position:"absolute",left:"0"}},[t._v("缩略图")]),t._v(" "),i("div",{},[i("el-upload",{staticClass:"avatar-uploader",attrs:{headers:t.headers,"show-file-list":!1,accept:"image/*",action:t.sealImgAction,"on-success":t.handleAvatarSuccess}},[t.imgUrl?i("img",{staticClass:"avatar",attrs:{src:t.imgUrl}}):i("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)]),t._v(" "),i("div",{staticClass:"formModel el-form-item clear",staticStyle:{position:"relative","padding-left":"80px"}},[i("label",{staticClass:"el-form-item__label",staticStyle:{width:"80px",position:"absolute",left:"0"}},[t._v("轮播图片")]),t._v(" "),i("div",{},[i("el-upload",{attrs:{headers:t.headers,"list-type":"picture-card",limit:6,accept:"image/*",action:t.sealImgAction,"on-exceed":t.onExceed,"file-list":t.fileList,"on-preview":t.handlePictureCardPreview,"on-remove":t.onSignImgRemove,"on-success":t.signUploadSuccess}},[t.fileList.length<7?i("i",{staticClass:"el-icon-plus"}):t._e()])],1)]),t._v(" "),i("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"商品详情"}}),t._v(" "),i("div",{staticClass:"quill-main"},[i("el-upload",{staticClass:"quill-uploader",attrs:{action:t.sealImgAction,headers:t.headers,"show-file-list":!1,"on-success":t.quillUloadSuccess,"on-error":t.quilUploadError,"before-upload":t.quillBeforeUpload}}),t._v(" "),i("el-row",{directives:[{name:"loading",rawName:"v-loading",value:t.uillUpdateImg,expression:"uillUpdateImg"}]},[i("quill-editor",{ref:"myQuillEditor",attrs:{options:t.editorOption},model:{value:t.form.detail,callback:function(e){t.$set(t.form,"detail",e)},expression:"form.detail"}})],1)],1),t._v(" "),i("el-form-item",{staticClass:"footer-submit"},[i("el-button",{attrs:{type:"primary",disabled:t.actionStatus},on:{click:t.onSubmit}},[t._v("立即创建")]),t._v(" "),i("el-button",{on:{click:function(e){t.cancel()}}},[t._v("取消")])],1)],1)],1),t._v(" "),i("el-col",{attrs:{span:8}},[i("div",{staticClass:"phone"},[i("div",{staticClass:"phone-cointer"},[i("swiper",{ref:"mySwiper",attrs:{options:t.phoneSwiperOption}},[i("swiper-slide",{staticClass:"text"},[i("swiper",{attrs:{options:t.swiperOption}},[t._l(t.fileList,function(t,e){return i("swiper-slide",{key:e},[i("img",{staticClass:"carousel-img",attrs:{src:t.url,alt:""}})])}),t._v(" "),i("div",{staticClass:"swiper-pagination",attrs:{slot:"pagination"},slot:"pagination"})],2),t._v(" "),i("div",{staticClass:"shop-header"},[i("div",{staticClass:"title-content"},[i("div",{staticClass:"title"},[t._v("\n                    "+t._s(t.form.title)+"\n                  ")]),t._v(" "),i("div",{staticClass:"share"},[i("i",{staticClass:"iconfont icon-fenxiang"}),t._v(" "),i("div",[t._v("分享")])])]),t._v(" "),i("div",{staticClass:"header-other"},[i("p",{staticClass:"price"},[i("span",{staticClass:"now"},[t._v("￥"+t._s(t.form.current_price))]),t._v(" "),i("span",{staticClass:"old"},[t._v("原价:"+t._s(t.form.current_price))])]),t._v(" "),i("div",{staticClass:"seal-content"},[i("p",{staticClass:"left"},[t._v("销量：0件")]),t._v(" "),i("p",{staticClass:"right"},[t._v("库存："+t._s(t.form.stock)+"件")])])])]),t._v(" "),i("div",{staticClass:"detail-content"},[t._v("\n                规格分类\n                "),i("div",{staticClass:"detail"},t._l(t.form.specifications,function(e,a){return i("div",{key:a,staticClass:"app-specifications-item"},[t._v(t._s(e.name))])}))]),t._v(" "),i("div",{staticClass:"detail-content"},[t._v("\n                图文详情\n                "),i("div",{staticClass:"detail",domProps:{innerHTML:t._s(t.form.detail)}})])],1),t._v(" "),i("div",{staticClass:"swiper-scrollbar",attrs:{slot:"scrollbar"},slot:"scrollbar"})],1),t._v(" "),i("div",{staticClass:"shop-footer"},[i("div",{staticClass:"footer-tag"},[i("i",{staticClass:"iconfont icon-gouwuche1"}),t._v("\n              购物车\n            ")]),t._v(" "),i("div",{staticClass:"footer-tag"},[i("i",{staticClass:"iconfont icon-kefu"}),t._v("\n              客服\n            ")]),t._v(" "),i("div",{staticClass:"footer-tag"},[i("i",{staticClass:"iconfont icon-shoucang"}),t._v("\n              收藏\n            ")]),t._v(" "),i("div",{staticClass:"footer-btn join"},[t._v("\n              加入购物车\n            ")]),t._v(" "),i("div",{staticClass:"footer-btn buy"},[t._v("\n              立即购买\n            ")])])],1)])])],1),t._v(" "),i("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)},r=[];a._withStripped=!0,i.d(e,"a",function(){return a}),i.d(e,"b",function(){return r})}}]);