(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{267:function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return o});const s=10,o="登录过期，请重新登录"},270:function(e,t,a){"use strict";var s=a(276),o=a.n(s),n=a(277),i=a.n(n),r=a(278),l=a.n(r),c=a(49);const u=new RegExp(c.a.allowUrls),d=new RegExp(c.a.noJsonTypeUrls);function h(e){if(!u.test(e)){let t=localStorage.getItem("malltoken");return d.test(e)?{token:t}:{token:t,"Content-Type":"application/json;charset=UTF-8"}}return d.test(e)?{}:{"Content-Type":"application/json;charset=UTF-8"}}function g(e){return l.a.done(),{data:{status:e.status,data:e.data}}}o.a.interceptors.request.use(e=>(l.a.start(),e),e=>Promise.reject(e)),o.a.interceptors.response.use(e=>e,e=>Promise.resolve(e.response)),t.a={post:(e,t)=>o()({method:"post",url:c.a.base_api_host+e,data:JSON.stringify(t),timeout:3e4,headers:h(e)}).then(g).catch(function(e){return e}),get:(e,t)=>o()({method:"get",url:c.a.base_api_host+e,params:t,timeout:3e4,headers:h(e)}).then(g).catch(function(e){return console.log(e),e}),delete:(e,t)=>o()({method:"delete",url:c.a.base_api_host+e,params:t,timeout:3e4,headers:h(e)}).then(g).catch(function(e){return console.log(e),e}),put:(e,t)=>o()({method:"put",url:c.a.base_api_host+e,data:JSON.stringify(t),timeout:3e4,headers:h(e)}).then(g).catch(function(e){return console.log(e),e}),formPost:(e,t)=>o()({method:"post",url:c.a.base_api_host+e,data:i.a.stringify(t),timeout:3e4,headers:h(e)}).then(g)}},271:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var s=a(267);const o=a(279),n=(e,t,a)=>(e.actionStatus&&(e.actionStatus=!1),t===o.OK||(t===o.NOT_FOUND?(e.$message({message:"请求不存在",type:"error"}),!1):t===o.UNAUTHORIZED?(e.$message({message:a,type:"error"}),!1):t===o.FORBIDDEN?(e.$message({message:s.b,type:"warning",duration:2e3,onClose:()=>{localStorage.removeItem("malluser"),localStorage.removeItem("malltoken"),localStorage.removeItem("mallfilePath"),e.$router.replace({path:"/login"})}}),!1):(e.$message({message:"服务器出错",type:"error"}),!1)))},308:function(e,t,a){},309:function(e,t,a){},413:function(e,t,a){"use strict";var s=a(308);a.n(s).a},414:function(e,t,a){"use strict";var s=a(309);a.n(s).a},518:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"cointer carousel-cointer"},[a("el-upload",{attrs:{headers:e.headers,"list-type":"picture-card",accept:"image/*",action:e.sealImgAction,"file-list":e.fileList,"on-preview":e.handlePictureCardPreview,"on-remove":e.onSignImgRemove,"on-success":e.signUploadSuccess}},[a("i",{staticClass:"el-icon-plus"})]),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)};s._withStripped=!0;var o=a(270);var n,i=a(271),r=a(49),l=(a(267),{data:()=>({carouselList:[],fileList:[],headers:{},token:"",dialogImageUrl:"",dialogVisible:!1,sealImgAction:`${r.a.base_api_host}admin/uploadDisk`}),computed:{},components:{},mounted(){const e=localStorage.getItem("malltoken");this.headers={token:e},this.filePath=localStorage.getItem("mallfilePath"),this.getCarouselList()},methods:{getCarouselList(){n=this.$loading({target:".content-container",lock:!0,background:"rgba(255, 255, 255, 0.74)"});const e=this;o.a.get("carousel").then(e=>e.data).then(t=>{const{data:a,status:s}=t;Object(i.a)(e,s,a)&&(e.carouselList=a,a.map((t,a)=>{e.fileList.push({url:this.filePath+t.url})}),n.close())})},handlePictureCardPreview(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},onSignImgRemove(e,t){var a=e.url.split("/"),s=a[a.length-1].split(".")[0];console.log(s),(e=>o.a.delete(`admin/carousel/${e}`).then(e=>e.data))(s).then(e=>{})},signUploadSuccess(e,t){(e=>o.a.post("admin/carousel",e).then(e=>e.data))({url:e}).then(e=>{const{data:t,status:a}=e;Object(i.a)(this,a,t)})}}}),c=(a(413),a(414),a(48)),u=Object(c.a)(l,s,[],!1,null,"19235d0e",null);u.options.__file="src/app/views/homeSetting/carousel/carousel.vue";t.default=u.exports}}]);